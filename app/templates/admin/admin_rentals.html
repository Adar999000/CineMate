{% extends "layouts/base.html" %}
{% block content %}

<div class="container mt-4 text-center">

  <!-- 🧾 כותרת -->
  <h2 class="mb-4">📼 ניהול כל ההשכרות</h2>

  <!-- טבלה -->
  <div class="table-responsive">
    <table class="table table-dark table-bordered table-hover align-middle">
      <thead>
        <tr>
          <th>ID</th>
          <th>משתמש</th>
          <th>אימייל</th>
          <th>סרט</th>
          <th>תאריך השכרה</th>
          <th>מחיקה</th>
        </tr>
      </thead>
      <tbody>
        {% for rental, user, movie in rentals %}
        <tr>
          <td>{{ rental.rental_id }}</td>
          <td>{{ user.first_name }} {{ user.last_name }}</td>
          <td>{{ user.email }}</td>
          <td>{{ movie.title }}</td>
          <td>{{ rental.rent_date.strftime('%Y-%m-%d') }}</td>
          <td>
            <form method="POST" action="{{ url_for('main.delete_rental', rental_id=rental.rental_id) }}"
                  onsubmit="return confirm('האם אתה בטוח שברצונך למחוק את ההשכרה?');">
              <button type="submit" class="btn btn-sm btn-outline-danger">🗑</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- חזור לדשבורד -->
  <div class="mt-4">
    <a href="{{ url_for('main.admin_dashboard') }}" class="btn btn-outline-light">⬅ חזור לדשבורד מנהל</a>
  </div>

</div>

{% endblock %}
